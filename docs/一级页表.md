页是地址空间的计量单位，并不是专属物理地址或线性地址，只要是4KB的地址空间都可以称为一页，所以线性地址的一页也要对应物理地址的一页

一页大小为4KB，这样一来，4GB地址空间被划分为4GB/4KM=1M个页，也就是4GB空间中可以容纳1048576个页,页表中自然也要有1048576个页表项，这就是我们要说一级页表

图 5-11 所示是一级页表模型，由于页大小是
4阻，所以页表项中的物理地址都是仕的整数倍，
故用十六进制表示的地址，低 3 位都是 0。就拿第
3 个页表项来说，其值为 Ox3000 ，表示该页对应的
物理地址是 Ox3000


其实也可以这样理解：任意一个地址最终会落到某一个物理页中。 32 位地址空间共有 lM (1048756)
个物理页，首先要做的是定位到某个具体物理页，然后给出物理页内的偏移量就可以访问到任意 1 字节的
内存啦。所以，用 20 位二进制就可以表示全部物理页啦。标准页都是 4阻， 12 位二进制便可以表达 4KB
之内的任意地址。


在 32 位保护模式下任何地址都是用 32 位二进制表示的，包括虚拟地址也是。经以上分析，虚拟地址的高
20 位可用来定位一个物理页，低 12 位可用来在该物理页内寻址。这是如何实现的呢？物理地址写在页表的页
表项中，段部件输出的只是线性地址，所以问题就变成了：怎样用线性地址找到页表中对应的页表项。
在此之前，大家要知道两件事。
(I ）分页机制打开前要将页表地址加载到控制寄存器 cr3 中，这是启用分页机制的先决条件之一，在
介绍二级页表时会细说。所以，在打开分页机制前加载到寄存器 cr3 中的是页表的物理地址，页表中页表
项的地址自然也是物理地址了。


(2 ）虽然内存分页机制的作用是将虚拟地址转换成物理地址，但其转换过程相当于在关闭分页机制下
进行，过程中所涉及到的页表及页表项的寻址，它们的地址都被 CPU 当作最终的物理地址（本来也是物
理地址）直接送上地址总线，不会被分页机制再次转换（否则会递归转换下去）。
刚才说过啦，如何通过线性地址找到其对应的页表项才是转换的关键。既然页表位于内存中，所以只
要提供页表项的物理地址便能够访问到页表项。页表本身属于线性表结构，相当于页表项数组，访问其中
任意页表项成员，只要知道该表页项的索引（下标）就够了。


分析过后，地址转换过程原理如下。
一个页表项对应一个页，所以，用线性地址的高 20 位作为页表项的索引，每个页表项要占用 4 字节
大小，所以这高 20 位的索引乘以 4 后才是该页表项相对于页表物理地址的字节偏移量。用 cr3 寄存器中
的页表物理地址加上此偏移量便是该页表项的物理地址，从该页表项中得到映射的物理页地址，然后用线
性地址的低 12 位与该物理页地址相加，所得的地址之和便是最终要访问的物理地址。

曾经有同学对地址转换过程感到迷惑，误以为启用分页后，页表项地址也是虚拟地址，还需要被转换，转换过程无眼递归下去，这显然是不对的。

以上所说的转换步骤多少都有点麻烦，既然地址转换算法己经是固定的了，何不使其在硬件一级自动
完成呢？有道理，所以 CPU 中集成了专门用来干这项工作的硬件模块，我们把该模块称为页部件。当程
序中给出一个线性地址时，页部件分析线性地址， ， 按照以上算法，自动在页表中检索到物理地址。
总结一下页部件的工作：用线性地址的高 20 位在页表中索引页表项，用线性地址的低 12 位与页表项
中的物理地址相加，所求的和便是最终线性地址对应的物理地址。