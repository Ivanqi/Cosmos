# MBR
MBR是主引导记录，Master或Main Boot Record，它存在于整个硬盘最开始的那个扇区，即0盘0道1扇区，这个扇区便被称为MBR引导扇区

注意这里用CHS(Cylinder柱面、Header磁头、Sector扇区)方式表示MBR引导扇区的地址，因此扇区地址以1开始。LBA方式是以0为起始为扇区编址的.一般情况下扇区大小是512字节

在MBR引导扇区的内容是
- 446字节的引导程序以及参数
- 64字节的分区表
- 2字节结束标记0x55和0xaa

在MBR引导扇区中存储引导程序，为的是从BIOS手中接过系统的控制权，也就是处理器的使用权

BIOS 知道MBR在0盘0道1扇区，因此它会将0盘0道1扇区中的MBR引导程序加载到物理地址0x7c00，然后跳过去执行，这样BIOS就把处理器使用权交给MBR了

既然MBR称为"主"引导程序，有"主"就得有"次"，MBR的作用相当于下一棒的引导程序总入口，BIOS把控制权交给MBR，MBR从众多可能的接力选手中挑出合适的人选并交出系统控制权，这个过程由"主引导器"去找"次引导器"

为什么BIOS不直接把控制权交给"次引导程序"?
- BIOS受限于其主板上的存储空间，代码量有限

MBR引导扇区中除了引导程序外，还有64字节大小的分区表，里面是分区信息。分区表中每个分区表项占16字节，因此MBR分区表中可容纳4个分区，这4个分区就是"次引导程序"的候选人群，MBR引导程序开始遍历4个分区，想找到合适的人选并把系统控制权交给它

通常情况下这个"次引导程序"就是操作系统提供的加载器，因此MBR引导程序的任务就是把控制权交给系统加载器，由该加载器完成操作系统的自举，最终使控制权交付给操作系统内核

为了让MBR知道哪里有操作系统，在分区时，如果想在某个分区中安装操作系统，就用分区工具将该分区设置为活动分区。设置为活动分区的本质就是把分区对应的分区表项中活动标记为0x80

活动分区标记位于分区表项中最开始的1字节,其值要么为0x80,要么为0，其他值都是非法的。0x80表示此分区上有引导程序，0表示没有引导程序，该分区不可引导

MBR在分析分区表时通过辨别"活动分区"的标记0x80开始找活动分区，如果找到，就将CPU使用权交给此分区上的引导程序，此程序就是内核加载器

# OBR
内核加载器被称为操作系统引导记录OBR，即OS Boot Record，此扇区也称为OBR引导扇区

在OBR扇区的前3个字节存放了跳转指令，这同样是约定，因此MBR找到活动分区后，就大胆主动跳到活动分区OBR引导扇区的起始处，该起始处的跳转指令马上将处理器带入操作系统引导程序，从此MBR完成交接工作，以后便是内核的天下

# DBR
DBR是DOS Boot Record也就是操作系统的引导记录(程序)，OBR是从DBR遗留下来的

DBR中的内容大概是
- 跳转指令，使MBR跳转到引导代码
- 厂商信息，DOS版本信息
- BIOS参数块BPB，即BIOS Parameter Block
- 操作系统引导程序
- 结束标记0x55 和 0xaa

# ERB
ERB是扩展分区中为了兼容MBR才提出的概念，主要是兼容MBR中的分区表

分区是用分区表来描述的，MBR中有分区表，扩展分区中的是一个个的逻辑分区，因此扩展分区中也要有分区表，为扩展分区存储分区表的扇区称为EBR,即 Expand Boot Record

ERB结构和MBR相同，只是位置不同，EBR位于各子扩展分区中最开始的扇区，理论上MBR只有1个，EBR有无数个